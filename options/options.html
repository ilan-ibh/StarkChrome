<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>StarkChrome Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="logo">S</div>
      <div>
        <h1>StarkChrome Settings</h1>
        <p class="subtitle">Smart local processing. Rare webhook calls. ~$0.15-0.30/day.</p>
      </div>
    </header>

    <div class="toast" id="toast">Saved</div>

    <!-- OpenClaw Connection -->
    <section class="card">
      <h2>OpenClaw Connection</h2>
      <div class="form-group">
        <label for="webhookUrl">Webhook URL</label>
        <input type="url" id="webhookUrl" placeholder="https://your-server.com/hooks/agent">
      </div>
      <div class="form-group">
        <label for="token">API Token</label>
        <div class="input-row">
          <input type="password" id="token" placeholder="Bearer token">
          <button class="btn-icon" id="toggleToken">&#128065;</button>
        </div>
      </div>
      <label class="check"><input type="checkbox" id="enabled"><span>Enable connection</span></label>
      <div class="btn-row">
        <button class="btn btn-sm" id="testBtn">Test Connection</button>
        <span class="result" id="testResult"></span>
      </div>
    </section>

    <!-- Schedule -->
    <section class="card">
      <h2>Schedule</h2>
      <div class="form-group">
        <label for="digestTime">Daily digest time</label>
        <input type="time" id="digestTime" value="20:00">
      </div>
      <label class="check"><input type="checkbox" id="sendBookmarks" checked><span>Send bookmarks immediately</span></label>
      <label class="check"><input type="checkbox" id="sendDownloads" checked><span>Send downloads immediately</span></label>
      <label class="check"><input type="checkbox" id="sendComeback" checked><span>Send comeback alerts (30+ min idle)</span></label>
    </section>

    <!-- Privacy -->
    <section class="card">
      <h2>Privacy</h2>
      <label class="check"><input type="checkbox" id="trackIncognito"><span>Track incognito windows</span></label>
      <div class="form-group">
        <label for="blocklist">Domain blocklist</label>
        <textarea id="blocklist" rows="4" placeholder="bank&#10;medical&#10;health.gov"></textarea>
        <span class="hint">One per line. URLs containing these are never tracked.</span>
      </div>
    </section>

    <!-- Data -->
    <section class="card">
      <h2>Data</h2>
      <div class="data-stats">
        <span>Local storage: <strong id="eventCount">0</strong> events (<strong id="storageKB">0</strong> KB)</span>
      </div>
      <div class="form-group">
        <label for="retention">Retention (days)</label>
        <input type="number" id="retention" value="90" min="7" max="365">
      </div>
      <div class="btn-row">
        <button class="btn btn-sm" id="exportBtn">Export History</button>
        <button class="btn btn-sm btn-danger" id="clearBtn">Clear All Data</button>
        <button class="btn btn-sm" id="digestBtn">Send Digest Now</button>
      </div>
      <div class="stats-row">
        <span>Webhooks sent: <strong id="statsSent">0</strong></span>
        <span>Failed: <strong id="statsFailed">0</strong></span>
      </div>
    </section>

    <div class="save-bar">
      <button class="btn btn-primary btn-lg" id="saveBtn">Save All Settings</button>
    </div>
  </div>
  <script src="options.js"></script>
</body>
</html>
